// Code generated by Pingram SDK generator. DO NOT EDIT.

package pingram

import (
	"context"
)

// Region represents the Pingram API region
type Region string

const (
	RegionUS Region = "us"
	RegionEU Region = "eu"
	RegionCA Region = "ca"
)

// regionBaseURLs maps regions to their API base URLs
var regionBaseURLs = map[Region]string{
	RegionUS: "https://api.pingram.io",
	RegionEU: "https://api.eu.pingram.io",
	RegionCA: "https://api.ca.pingram.io",
}

// ClientOption is a function that configures the Client
type ClientOption func(*Client)

// WithRegion sets the region for the client
func WithRegion(region Region) ClientOption {
	return func(c *Client) {
		if url, ok := regionBaseURLs[region]; ok {
			c.cfg.Servers = ServerConfigurations{{URL: url}}
		}
	}
}

// WithBaseURL sets a custom base URL for the client
func WithBaseURL(baseURL string) ClientOption {
	return func(c *Client) {
		c.cfg.Servers = ServerConfigurations{{URL: baseURL}}
	}
}

// Client is the Pingram client wrapper that provides a simplified API
type Client struct {
	*APIClient
	apiKey string
	cfg    *Configuration

	AccountAPI *AccountAPIService

	ComponentsAPI *ComponentsAPIService

	DefaultAPI *DefaultAPIService

	DomainsAPI *DomainsAPIService

	EditorAPI *EditorAPIService

	EnvironmentsAPI *EnvironmentsAPIService

	HealthAPI *HealthAPIService

	InsightsAPI *InsightsAPIService

	KeysAPI *KeysAPIService

	LogsAPI *LogsAPIService

	MembersAPI *MembersAPIService

	SenderAPI *SenderAPIService

	TemplatesAPI *TemplatesAPIService

	TypesAPI *TypesAPIService

	UserAPI *UserAPIService

	UsersAPI *UsersAPIService
}

// NewClient creates a new Pingram client with the given API key
func NewClient(apiKey string, opts ...ClientOption) *Client {
	cfg := NewConfiguration()
	cfg.AddDefaultHeader("Authorization", "Bearer "+apiKey)

	c := &Client{
		apiKey: apiKey,
		cfg:    cfg,
	}

	// Apply options
	for _, opt := range opts {
		opt(c)
	}

	// Create the underlying API client
	c.APIClient = NewAPIClient(cfg)
	c.common.client = c.APIClient

	c.AccountAPI = (*AccountAPIService)(&c.common)

	c.ComponentsAPI = (*ComponentsAPIService)(&c.common)

	c.DefaultAPI = (*DefaultAPIService)(&c.common)

	c.DomainsAPI = (*DomainsAPIService)(&c.common)

	c.EditorAPI = (*EditorAPIService)(&c.common)

	c.EnvironmentsAPI = (*EnvironmentsAPIService)(&c.common)

	c.HealthAPI = (*HealthAPIService)(&c.common)

	c.InsightsAPI = (*InsightsAPIService)(&c.common)

	c.KeysAPI = (*KeysAPIService)(&c.common)

	c.LogsAPI = (*LogsAPIService)(&c.common)

	c.MembersAPI = (*MembersAPIService)(&c.common)

	c.SenderAPI = (*SenderAPIService)(&c.common)

	c.TemplatesAPI = (*TemplatesAPIService)(&c.common)

	c.TypesAPI = (*TypesAPIService)(&c.common)

	c.UserAPI = (*UserAPIService)(&c.common)

	c.UsersAPI = (*UsersAPIService)(&c.common)

	return c
}

// Send sends a notification using the default API
func (c *Client) Send(ctx context.Context, body SenderPostBody) (*SenderPostResponse, error) {
	resp, _, err := c.DefaultAPI.Send(ctx).SenderPostBody(body).Execute()
	return resp, err
}
